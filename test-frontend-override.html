<!DOCTYPE html>
<html>
<head>
    <title>Test Frontend with Override</title>
</head>
<body>
    <h1>Frontend WebSocket Override Test</h1>
    <p>This sets RUNTIME_CONFIG to use the ingress URL</p>
    <button onclick="loadFrontend()">Load Frontend with Ingress WebSocket</button>
    <div id="frame-container"></div>
    
    <script>
    function loadFrontend() {
        // Create an iframe with modified config
        const container = document.getElementById('frame-container');
        container.innerHTML = `
            <iframe 
                id="frontend-frame"
                src="http://localhost:8080" 
                style="width: 100%; height: 600px; border: 1px solid #ccc;"
                onload="injectConfig()"
            ></iframe>
        `;
    }
    
    function injectConfig() {
        const iframe = document.getElementById('frontend-frame');
        if (iframe && iframe.contentWindow) {
            // Override the RUNTIME_CONFIG in the iframe
            iframe.contentWindow.RUNTIME_CONFIG = {
                NATS_URL: "ws://nats.meme-generator.local",
                REQUEST_SUBJECT: "meme.request",
                RESPONSE_SUBJECT: "meme.response"
            };
            console.log('Injected config:', iframe.contentWindow.RUNTIME_CONFIG);
        }
    }
    </script>
</body>
</html>